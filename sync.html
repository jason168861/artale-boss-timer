<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>楓之谷 Artale BOSS 計時器 (即時同步版)</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="welcome-screen">
        <h2>選擇一個 BOSS 開始計時</h2>
        <div id="boss-selection-grid"></div>
    </div>

    <div class="container hidden">
        <h1>楓之谷 Artale BOSS 計時器 (即時同步版)</h1>
        <div style="text-align: center; margin-bottom: 15px;">
            <a href="index.html" style="color: #ffc107; text-decoration: none;">&raquo; 切換至個人版 &laquo;</a>
        </div>
        
        <div class="controls">
            <div class="control-group">
                <label>選擇 BOSS：</label>
                <div class="custom-select-wrapper">
                    <div class="custom-select">
                        <div class="custom-select-trigger">
                            <span>選擇一個 BOSS...</span>
                            <div class="arrow"></div>
                        </div>
                        <div class="custom-options"></div>
                    </div>
                </div>
            </div>
            <div class="control-group">
                <label for="channel-input">頻道：</label>
                <input type="number" id="channel-input" min="1" max="3000" value="1">
            </div>
             <div class="control-group">
                <label for="sort-order-select">排序方式：</label>
                <select id="sort-order-select">
                    <option value="respawnTime" selected>重生時間</option>
                    <option value="bossName">BOSS 種類</option>
                    <option value="defeatTime">擊殺時間</option>
                </select>
            </div>
            <button id="add-timer-btn">新增計時器</button>
            <button id="share-btn">分享同步連結</button>
            <button id="clear-all-btn">全部清除</button>
        </div>

        <div class="timers-section">
            <h2>🔥 已進入重生區間</h2>
            <div id="respawn-ready-container" class="timers-grid"></div>
        </div>
        
        <div class="timers-section">
            <h2>⏳ 等待重生中</h2>
            <div id="waiting-container" class="timers-grid"></div>
        </div>
    </div>

    <div id="loot-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="loot-modal-title">BOSS 掉落物紀錄</h2>
                <div class="modal-header-buttons">
                    <button id="clear-loot-btn" class="clear-btn" title="清除此BOSS的紀錄">清除紀錄</button>
                    <button id="close-loot-modal-btn" class="close-btn">&times;</button>
                </div>
            </div>
            <div id="loot-item-container" class="loot-grid">
                </div>
        </div>
    </div>
    <div id="privacy-modal" class="modal-overlay">
        <div class="modal-content" style="max-width: 500px;">
            <div class="modal-header">
                <h2 id="privacy-modal-title">歡迎使用即時同步功能</h2>
            </div>
            <p>此頁面的計時器將會透過 Firebase 伺服器進行即時同步，讓所有使用相同分享連結的人看到一致的畫面。</p>
            <p><strong>請注意：</strong>您的計時器資料（BOSS名稱、頻道、擊殺時間）將會被傳送至伺服器。我們承諾不會將您的資料用於其他用途或對外洩漏。</p>
            <p>點擊「同意」開始同步。</p>
            <div class="modal-actions" style="justify-content: center;">
                <button id="privacy-agree-btn" class="modal-btn merge">我了解並同意</button>
            </div>
        </div>
    </div>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/lz-string/1.4.4/lz-string.min.js"></script>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    
    <script src="sync_script.js"></script>
</body>
</html>